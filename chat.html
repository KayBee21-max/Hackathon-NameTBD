<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Happy Engine — Chat</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg-0: #f1f6ff;
      --bg-1: #eef3ff;
      --panel: #ffffff;
      --accent: #2563eb;
      --accent-2: #06b6d4;
      --muted: #6b7280;
      --user: #e7f0ff;
      --bot: #f8fafc;
      --glass: rgba(255,255,255,0.6);
      --radius: 14px;
      --shadow-lg: 0 12px 40px rgba(16,24,40,0.12);
      --shadow-sm: 0 6px 18px rgba(12,24,48,0.06);
      --max-width: 1100px;
    }

    * { box-sizing: border-box; }
    html,body { height:100%; }
    body{
      margin:0;
      font-family: "Inter", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background: linear-gradient(180deg, var(--bg-1), var(--bg-0));
      display:flex;
      align-items:center;
      justify-content:center;
      padding:28px;
    }

    .wrap {
      width:90%;
      max-width: var(--max-width);
      border-radius: calc(var(--radius) + 6px);
      overflow:hidden;
      box-shadow: var(--shadow-lg);
      display:grid;
      grid-template-columns: 1fr 340px;
      gap:0;
      background: linear-gradient(180deg, rgba(255,255,255,0.98), rgba(250,252,255,0.9));
     
      height: calc(100vh - 56px);
    }
    
  
    .panel {
      padding:18px;
      display:flex;
      flex-direction:column;
      gap:12px;
   
      min-height:0;
      height:100%;
    }
    
    header.chat-head {
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
    }

    .brand {
      display:flex;
      gap:12px;
      align-items:center;
    }
    .logo {
      width:46px; height:46px; border-radius:10px;
      background: linear-gradient(135deg, var(--accent), var(--accent-2));
      color:white; display:flex; align-items:center; justify-content:center; font-weight:700;
      box-shadow: var(--shadow-sm);
    }
    .title { font-size:18px; margin:0; }
    .subtitle { font-size:13px; color:var(--muted); margin-top:3px; }

    .head-actions { display:flex; gap:8px; align-items:center; }

    button.icon {
      border:0; background:transparent; padding:8px; border-radius:10px; cursor:pointer;
    }
    .btn {
      border:0; padding:8px 12px; border-radius:10px; cursor:pointer; font-weight:600;
      background: rgba(255,255,255,0.65);
    }
    .btn.primary { background: linear-gradient(90deg,var(--accent),var(--accent-2)); color:white; box-shadow: 0 8px 22px rgba(37,99,235,0.12); }

    /* conversation area */
    #conversation {
      flex: 1 1 auto;
      min-height: 0; 
      padding:16px;
      border-radius:12px;
      background: linear-gradient(180deg, rgba(255,255,255,0.7), rgba(255,255,255,0.55));
      overflow:auto;
      display:flex;
      flex-direction:column;
      gap:12px;
      border:1px solid rgba(12,24,48,0.04);
      transition: all .18s ease;
      /* optional cap so composer/footer remain visible on small screens */
      max-height: calc(100vh - 220px);
    }
    .msg {
      display:flex;
      gap:12px;
      align-items:flex-end;
      max-width:90%;
      transition: transform .16s ease, opacity .16s ease;
    }
    .msg.bot { align-self:flex-start; }
    .msg.user { align-self:flex-end; flex-direction:row-reverse; }

    .avatar {
      min-width:40px; height:40px; border-radius:10px; display:flex; align-items:center; justify-content:center; color:white; font-weight:700;
    }
    .avatar.bot { background: linear-gradient(135deg,#e6eefc,#bcd8ff); color:#08306f; }
    .avatar.user { background: linear-gradient(135deg,#2b8cff,#6fc6ff); }

    .bubble {
      background: var(--bot);
      padding:12px 14px;
      border-radius:12px;
      font-size:15px;
      line-height:1.45;
      box-shadow: var(--shadow-sm);
      white-space:pre-wrap;
      word-break:break-word;
      max-width:78%;
    }
    .msg.user .bubble { background: var(--user); }

    .meta { font-size:12px; color:var(--muted); margin-top:8px; display:flex; gap:8px; align-items:center; }

   
    .typing { display:inline-flex; gap:5px; align-items:center; }
    .dot { width:8px; height:8px; border-radius:50%; background:#8aa5ff; animation: bounce 1s infinite; opacity:.9; }
    .dot:nth-child(2){ animation-delay:.12s } .dot:nth-child(3){ animation-delay:.24s }
    @keyframes bounce { 0%{transform:translateY(0);opacity:.35}50%{transform:translateY(-6px);opacity:1}100%{transform:translateY(0);opacity:.35} }

    /* right column */
    .side {
      padding:18px;
      border-left:1px solid rgba(12,24,48,0.04);
      display:flex;
      flex-direction:column;
      gap:12px;
      min-width:170px;
      background: linear-gradient(180deg, rgba(255,255,255,0.95), rgba(250,252,255,0.97));
    }
    .side h3 { margin:0; font-size:14px; }
    .suggestions { display:flex; flex-direction:column; gap:8px; margin-top:8px; }
    .chip { padding:10px; border-radius:999px; background:#eef2ff; color:#1e40af; font-weight:700; border:0; cursor:pointer; text-align:left; }

    /* input */
    .composer {
      display:flex;
      gap:10px;
      align-items:end;
      margin-top:6px;
    }
    textarea#user-input {
      width:100%;
      min-height:56px;
      max-height:140px;
      resize:vertical;
      padding:12px;
      border-radius:10px;
      border:1px solid rgba(12,24,48,0.06);
      font-size:15px;
      outline:none;
      font-family:inherit;
    }
    #send-button {
      width:56px; height:56px; border-radius:12px; border:0; background:linear-gradient(90deg,var(--accent),var(--accent-2)); color:white; font-weight:800; box-shadow:0 10px 26px rgba(37,99,235,0.12); cursor:pointer;
    }

    .footer { display:flex; justify-content:space-between; align-items:center; color:var(--muted); font-size:13px; margin-top:6px; }

    /* mobile responsiveness */
    @media (max-width:980px) {
      .wrap { grid-template-columns: 1fr; min-height:100vh; border-radius:12px; }
      .side { order:2; border-left:0; border-top:1px solid rgba(12,24,48,0.04); }
      .panel { min-height:unset; padding:14px; }
      header.chat-head { gap:8px; }
      #conversation { height: calc(100vh - 340px); }
    }

    @media (max-width:560px){
      .logo { width:40px; height:40px; font-size:14px; }
      .avatar { min-width:34px; height:34px; }
      .bubble { font-size:14px; }
      textarea#user-input { min-height:48px; }
    }
  </style>
</head>
<body>
  <div class="wrap" role="application" aria-label="Chat interface">
    <div class="panel" aria-live="polite">
      <header class="chat-head">
        <div class="brand">
          <div class="logo">SE</div>
          <div>
            <div class="title">Happy Engine</div>
            <div class="subtitle">Supportive mental health assistant</div>
          </div>
        </div>

        <div class="head-actions">
          <button id="clear-btn" class="btn" title="Clear conversation">Clear</button>
          <a class="btn" href="index.html">Home</a>
        </div>
      </header>

      <main id="conversation" class="conversation" role="log" aria-live="polite"></main>

      <div class="composer" role="region" aria-label="Message composer">
        <textarea id="user-input" placeholder="Say hello — the assistant is listening…" aria-label="Message input"></textarea>
        <button id="send-button" title="Send message" aria-label="Send">➤</button>
      </div>

      <div class="footer">
        <div id="status">Ready</div>
        <div class="muted">Press Enter to send • Suggestions on the right</div>
      </div>
    </div>

    <aside class="side" aria-label="Suggestions & quick actions">
      <h3>Quick suggestions</h3>
      <div class="suggestions" id="suggestions">
        <button class="chip">Advice on Depression</button>
        <button class="chip">What are the next steps?</button>
        <button class="chip">Summarize this conversation</button>
        <button class="chip">Immediate self-care tips</button>
      </div>

      <div style="margin-top:8px; display:flex; gap:8px; flex-direction:column;">
        <button class="btn" onclick="document.getElementById('conversation').scrollTo({ top: 0, behavior: 'smooth' })">Scroll to top</button>
        <a class="btn" href="index.html">Back to scenarios</a>
      </div>

      <div style="margin-top:auto; color:var(--muted); font-size:13px">
        For crisis or severe concerns, contact local emergency services or a professional.
      </div>
    </aside>
  </div>

  <script type="module" src="chat.js"></script>

  <script>
    // small UX enhancement: quick-suggestion click -> fill input
    document.addEventListener('click', (e) => {
      const chip = e.target.closest('.chip');
      if (!chip) return;
      const input = document.getElementById('user-input');
      input.value = chip.textContent;
      input.focus();
    });

    // keyboard send
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Enter' && document.activeElement === document.getElementById('user-input') && !e.shiftKey) {
        e.preventDefault();
        document.getElementById('send-button').click();
      }
    });
  </script>
</body>
</html>